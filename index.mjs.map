{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2024 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isComplexDataType from '@stdlib/array-base-assert-is-complex-floating-point-data-type';\nimport isBooleanDataType from '@stdlib/array-base-assert-is-boolean-data-type';\nimport arraylike2object from '@stdlib/array-base-arraylike2object';\nimport reinterpretComplex from '@stdlib/strided-base-reinterpret-complex';\nimport reinterpretBoolean from '@stdlib/strided-base-reinterpret-boolean';\nimport countFalsy from '@stdlib/array-base-count-falsy';\n\n\n// FUNCTIONS //\n\n/**\n* Replaces elements in an indexed array with provided values.\n*\n* @private\n* @param {Collection} x - input array\n* @param {Collection} mask - mask array\n* @param {Collection} values - values to set\n* @returns {Collection} input array\n*\n* @example\n* var x = [ 1, 2, 3, 4 ];\n*\n* var mask = [ 1, 0, 0, 1 ];\n* var values = [ 20, 30 ];\n*\n* var out = indexed( x, mask, values );\n* // returns [ 1, 20, 30, 4 ]\n*/\nfunction indexed( x, mask, values ) {\n\tvar iv;\n\tvar N;\n\tvar i;\n\n\tN = values.length;\n\tiv = 0;\n\tfor ( i = 0; i < x.length; i++ ) {\n\t\tif ( !mask[ i ] ) {\n\t\t\tx[ i ] = values[ iv ];\n\t\t\tiv = ( iv+1 ) % N;\n\t\t}\n\t}\n\treturn x;\n}\n\n/**\n* Replaces elements of an accessor array with provided values.\n*\n* @private\n* @param {Object} x - input array object\n* @param {Object} mask - mask array object\n* @param {Object} values - values object\n* @returns {Collection} input array\n*\n* @example\n* import toAccessorArray from '@stdlib/array-base-to-accessor-array';\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n*\n* var x = toAccessorArray( [ 1, 2, 3, 4 ] );\n*\n* var mask = toAccessorArray( [ 1, 0, 0, 1 ] );\n* var values = toAccessorArray( [ 20, 30 ] );\n*\n* var out = accessors( arraylike2object( x ), arraylike2object( mask ), arraylike2object( values ) );\n*\n* var v = x.get( 0 );\n* // returns 1\n*\n* v = x.get( 1 );\n* // returns 20\n*/\nfunction accessors( x, mask, values ) {\n\tvar xdata;\n\tvar mdata;\n\tvar vdata;\n\tvar xset;\n\tvar mget;\n\tvar vget;\n\tvar iv;\n\tvar N;\n\tvar i;\n\n\txdata = x.data;\n\tmdata = mask.data;\n\tvdata = values.data;\n\n\txset = x.accessors[ 1 ];\n\tmget = mask.accessors[ 0 ];\n\tvget = values.accessors[ 0 ];\n\n\tN = vdata.length;\n\tiv = 0;\n\tfor ( i = 0; i < xdata.length; i++ ) {\n\t\tif ( !mget( mdata, i ) ) {\n\t\t\txset( xdata, i, vget( vdata, iv ) );\n\t\t\tiv = ( iv+1 ) % N;\n\t\t}\n\t}\n\treturn xdata;\n}\n\n/**\n* Replaces elements in a complex array with provided values.\n*\n* @private\n* @param {Collection} x - real-valued floating-point input array view\n* @param {Object} mask - mask array object\n* @param {Collection} values - real-valued floating-point values array view\n* @returns {Collection} input array view\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0 ] );\n*\n* var mask = [ 0, 1, 0, 1 ];\n* var values = new Float64Array( [ 10.0, 20.0, 50.0, 60.0 ] );\n*\n* var out = complex( x, arraylike2object( mask ), values );\n* // returns <Float64Array>[ 10.0, 20.0, 3.0, 4.0, 50.0, 60.0, 7.0, 8.0 ]\n*/\nfunction complex( x, mask, values ) {\n\tvar mdata;\n\tvar mget;\n\tvar iv;\n\tvar N;\n\tvar i;\n\n\tmdata = mask.data;\n\tmget = mask.accessors[ 0 ];\n\n\tN = values.length;\n\tiv = 0;\n\tfor ( i = 0; i < x.length; i += 2 ) {\n\t\tif ( !mget( mdata, i/2 ) ) {\n\t\t\tx[ i ] = values[ iv ];\n\t\t\tx[ i+1 ] = values[ iv+1 ];\n\t\t\tiv = ( iv+2 ) % N;\n\t\t}\n\t}\n\treturn x;\n}\n\n/**\n* Replaces elements in a boolean array with provided values.\n*\n* @private\n* @param {Uint8Array} x - input array\n* @param {Object} mask - mask array object\n* @param {Uint8Array} values - values to set\n* @returns {Uint8Array} input array\n*\n* @example\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n* import Uint8Array from '@stdlib/array-uint8';\n*\n* var x = new Uint8Array( [ 1, 0, 0, 1 ] );\n*\n* var mask = [ 1, 0, 0, 1 ];\n* var values = new Uint8Array( [ 1, 1 ] );\n*\n* var out = boolean( x, arraylike2object( mask ), values );\n* // returns <Uint8Array>[ 1, 1, 1, 1 ]\n*/\nfunction boolean( x, mask, values ) {\n\tvar mdata;\n\tvar mget;\n\tvar iv;\n\tvar N;\n\tvar i;\n\n\tmdata = mask.data;\n\tmget = mask.accessors[ 0 ];\n\n\tN = values.length;\n\tiv = 0;\n\tfor ( i = 0; i < x.length; i++ ) {\n\t\tif ( !mget( mdata, i ) ) {\n\t\t\tx[ i ] = values[ iv ];\n\t\t\tiv = ( i+1 ) % N;\n\t\t}\n\t}\n\treturn x;\n}\n\n\n// MAIN //\n\n/**\n* Replaces elements of an array with provided values according to a provided mask array.\n*\n* @param {Collection} x - input array\n* @param {Collection} mask - mask array\n* @param {Collection} values - values to set\n* @param {string} mode - string specifying behavior when the number of values is less than the number of falsy mask values\n* @throws {Error} insufficient values to satisfy mask array\n* @returns {Collection} input array\n*\n* @example\n* var x = [ 1, 2, 3, 4 ];\n*\n* var mask = [ 1, 0, 0, 1 ];\n* var values = [ 20, 30 ];\n*\n* var out = mskput( x, mask, values, 'throw' );\n* // returns [ 1, 20, 30, 4 ]\n*\n* var bool = ( out === x );\n* // returns true\n*\n* @example\n* var x = [ 1, 2, 3, 4 ];\n*\n* var mask = [ 1, 0, 0, 1 ];\n* var values = [ 30 ];\n*\n* var out = mskput( x, mask, values, 'broadcast' );\n* // returns [ 1, 30, 30, 4 ]\n*\n* var bool = ( out === x );\n* // returns true\n*\n* @example\n* var x = [ 1, 2, 3, 4 ];\n*\n* var mask = [ 0, 0, 1, 0 ];\n* var values = [ 20, 30 ];\n*\n* var out = mskput( x, mask, values, 'repeat' );\n* // returns [ 20, 30, 3, 20 ]\n*\n* var bool = ( out === x );\n* // returns true\n*/\nfunction mskput( x, mask, values, mode ) {\n\tvar xo;\n\tvar mo;\n\tvar vo;\n\n\tif ( mode === 'throw' && countFalsy( mask ) > values.length ) {\n\t\tthrow new Error( 'invalid arguments. Insufficient values to satisfy mask array.' );\n\t}\n\tif ( mode === 'broadcast' && values.length > 1 && countFalsy( mask ) > values.length ) {\n\t\tthrow new Error( 'invalid arguments. Insufficient values to satisfy mask array.' );\n\t}\n\txo = arraylike2object( x );\n\tmo = arraylike2object( mask );\n\tvo = arraylike2object( values );\n\tif (\n\t\txo.accessorProtocol ||\n\t\tmo.accessorProtocol ||\n\t\tvo.accessorProtocol\n\t) {\n\t\t// Note: we only explicitly support select dtype pairs, as this function should not be concerned with casting rules, etc. That is left to userland...\n\t\tif ( isComplexDataType( xo.dtype ) && isComplexDataType( vo.dtype ) ) {\n\t\t\tcomplex( reinterpretComplex( x, 0 ), mo, reinterpretComplex( values, 0 ) ); // eslint-disable-line max-len\n\t\t\treturn x;\n\t\t}\n\t\tif ( isBooleanDataType( xo.dtype ) && isBooleanDataType( vo.dtype ) ) {\n\t\t\tboolean( reinterpretBoolean( x, 0 ), mo, reinterpretBoolean( values, 0 ) ); // eslint-disable-line max-len\n\t\t\treturn x;\n\t\t}\n\t\taccessors( xo, mo, vo );\n\t\treturn x;\n\t}\n\tindexed( x, mask, values );\n\treturn x;\n}\n\n\n// EXPORTS //\n\nexport default mskput;\n"],"names":["mskput","x","mask","values","mode","xo","mo","vo","countFalsy","length","Error","arraylike2object","accessorProtocol","isComplexDataType","dtype","mdata","mget","iv","N","i","data","accessors","complex","reinterpretComplex","isBooleanDataType","boolean","reinterpretBoolean","xdata","vdata","xset","vget","indexed"],"mappings":";;8oBAgQA,SAASA,EAAQC,EAAGC,EAAMC,EAAQC,GACjC,IAAIC,EACAC,EACAC,EAEJ,GAAc,UAATH,GAAoBI,EAAYN,GAASC,EAAOM,OACpD,MAAM,IAAIC,MAAO,iEAElB,GAAc,cAATN,GAAwBD,EAAOM,OAAS,GAAKD,EAAYN,GAASC,EAAOM,OAC7E,MAAM,IAAIC,MAAO,iEAKlB,OAHAL,EAAKM,EAAkBV,GACvBK,EAAKK,EAAkBT,GACvBK,EAAKI,EAAkBR,GAEtBE,EAAGO,kBACHN,EAAGM,kBACHL,EAAGK,iBAGEC,EAAmBR,EAAGS,QAAWD,EAAmBN,EAAGO,QArI9D,SAAkBb,EAAGC,EAAMC,GAC1B,IAAIY,EACAC,EACAC,EACAC,EACAC,EAOJ,IALAJ,EAAQb,EAAKkB,KACbJ,EAAOd,EAAKmB,UAAW,GAEvBH,EAAIf,EAAOM,OACXQ,EAAK,EACCE,EAAI,EAAGA,EAAIlB,EAAEQ,OAAQU,GAAK,EACzBH,EAAMD,EAAOI,EAAE,KACpBlB,EAAGkB,GAAMhB,EAAQc,GACjBhB,EAAGkB,EAAE,GAAMhB,EAAQc,EAAG,GACtBA,GAAOA,EAAG,GAAMC,EAInB,CAkHGI,CAASC,EAAoBtB,EAAG,GAAKK,EAAIiB,EAAoBpB,EAAQ,IAC9DF,GAEHuB,EAAmBnB,EAAGS,QAAWU,EAAmBjB,EAAGO,QA9F9D,SAAkBb,EAAGC,EAAMC,GAC1B,IAAIY,EACAC,EACAC,EACAC,EACAC,EAOJ,IALAJ,EAAQb,EAAKkB,KACbJ,EAAOd,EAAKmB,UAAW,GAEvBH,EAAIf,EAAOM,OACXQ,EAAK,EACCE,EAAI,EAAGA,EAAIlB,EAAEQ,OAAQU,IACpBH,EAAMD,EAAOI,KAClBlB,EAAGkB,GAAMhB,EAAQc,GACjBA,GAAOE,EAAE,GAAMD,EAIlB,CA4EGO,CAASC,EAAoBzB,EAAG,GAAKK,EAAIoB,EAAoBvB,EAAQ,IAC9DF,IA9LV,SAAoBA,EAAGC,EAAMC,GAC5B,IAAIwB,EACAZ,EACAa,EACAC,EACAb,EACAc,EACAb,EACAC,EACAC,EAYJ,IAVAQ,EAAQ1B,EAAEmB,KACVL,EAAQb,EAAKkB,KACbQ,EAAQzB,EAAOiB,KAEfS,EAAO5B,EAAEoB,UAAW,GACpBL,EAAOd,EAAKmB,UAAW,GACvBS,EAAO3B,EAAOkB,UAAW,GAEzBH,EAAIU,EAAMnB,OACVQ,EAAK,EACCE,EAAI,EAAGA,EAAIQ,EAAMlB,OAAQU,IACxBH,EAAMD,EAAOI,KAClBU,EAAMF,EAAOR,EAAGW,EAAMF,EAAOX,IAC7BA,GAAOA,EAAG,GAAMC,EAInB,CAoKEG,CAAWhB,EAAIC,EAAIC,GACZN,IA3OT,SAAkBA,EAAGC,EAAMC,GAC1B,IAAIc,EACAC,EACAC,EAIJ,IAFAD,EAAIf,EAAOM,OACXQ,EAAK,EACCE,EAAI,EAAGA,EAAIlB,EAAEQ,OAAQU,IACpBjB,EAAMiB,KACXlB,EAAGkB,GAAMhB,EAAQc,GACjBA,GAAOA,EAAG,GAAMC,EAInB,CA+NCa,CAAS9B,EAAGC,EAAMC,GACXF,EACR"}